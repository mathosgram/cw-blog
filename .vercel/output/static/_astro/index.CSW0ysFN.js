var X=(e,r,t)=>!e&&t?j(t):Z(r),j=e=>{const r=e.userId,t=e.user,n=e.sessionId,i=e.sessionStatus,o=e.sessionClaims,s=e.session,c=e.organization,u=e.orgId,l=e.orgRole,a=e.orgPermissions,d=e.orgSlug,f=e.actor,k=e.factorVerificationAge;return{userId:r,user:t,sessionId:n,session:s,sessionStatus:i,sessionClaims:o,organization:c,orgId:u,orgRole:l,orgPermissions:a,orgSlug:d,actor:f,factorVerificationAge:k}},Z=e=>{const r=e.user?e.user.id:e.user,t=e.user,n=e.session?e.session.id:e.session,i=e.session,o=e.session?.status,s=e.session?e.session.lastActiveToken?.jwt?.claims:null,c=e.session?e.session.factorVerificationAge:null,u=i?.actor,l=e.organization,a=e.organization?e.organization.id:e.organization,d=l?.slug,f=l&&t?.organizationMemberships?.find(Q=>Q.organization.id===a),k=f&&f.permissions,G=f&&f.role;return{userId:r,user:t,sessionId:n,session:i,sessionStatus:o,sessionClaims:s,organization:l,orgId:a,orgRole:G,orgSlug:d,orgPermissions:k,actor:u,factorVerificationAge:c}};function P(e){return!1}var L=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,ee=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],D="pk_live_",re="pk_test_";function z(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return r.includes("$")?!1:r.includes(".")}function C(e,r={}){if(e=e||"",!e||!U(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!U(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(D)?"production":"development";let n;try{n=L(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!z(n)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let i=n.slice(0,-1);return r.proxyUrl?i=r.proxyUrl:t!=="development"&&r.domain&&r.isSatellite&&(i=`clerk.${r.domain}`),{instanceType:t,frontendApi:i}}function U(e=""){try{if(!(e.startsWith(D)||e.startsWith(re)))return!1;const t=e.split("_");if(t.length!==3)return!1;const n=t[2];if(!n)return!1;const i=L(n);return z(i)}catch{return!1}}function te(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t=typeof r=="string"?r:r.hostname;let n=e.get(t);return n===void 0&&(n=ee.some(i=>t.endsWith(i)),e.set(t,n)),n}}}var ne="METHOD_CALLED";function ie(e,r){return{event:ne,payload:{method:e,...r}}}let g=[],m=0;const y=4;let E=0,_=e=>{let r=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=r.push(n),()=>{for(let o=m+y;o<g.length;)g[o]===n?g.splice(o,y):o+=y;let i=r.indexOf(n);~i&&(r.splice(i,1),--t.lc||t.off())}},notify(n,i){E++;let o=!g.length;for(let s of r)g.push(s,t.value,n,i);if(o){for(m=0;m<g.length;m+=y)g[m](g[m+1],g[m+2],g[m+3]);g.length=0}},off(){},set(n){let i=t.value;i!==n&&(t.value=n,t.notify(i))},subscribe(n){let i=t.listen(n);return n(t.value),i},value:e};return t};const oe=5,b=6,w=10;let se=(e,r,t,n)=>(e.events=e.events||{},e.events[t+w]||(e.events[t+w]=n(i=>{e.events[t].reduceRight((o,s)=>(s(o),o),{shared:{},...i})})),e.events[t]=e.events[t]||[],e.events[t].push(r),()=>{let i=e.events[t],o=i.indexOf(r);i.splice(o,1),i.length||(delete e.events[t],e.events[t+w](),delete e.events[t+w])}),ae=1e3,K=(e,r)=>se(e,n=>{let i=r(n);i&&e.events[b].push(i)},oe,n=>{let i=e.listen;e.listen=(...s)=>(!e.lc&&!e.active&&(e.active=!0,n()),i(...s));let o=e.off;return e.events[b]=[],e.off=()=>{o(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let s of e.events[b])s();e.events[b]=[]}},ae)},()=>{e.listen=i,e.off=o}}),N=(e,r,t)=>{Array.isArray(e)||(e=[e]);let n,i,o=()=>{if(i===E)return;i=E;let a=e.map(d=>d.get());if(!n||a.some((d,f)=>d!==n[f])){n=a;let d=r(...a);d&&d.then&&d.t?d.then(f=>{n===a&&s.set(f)}):(s.set(d),i=E)}},s=_(void 0),c=s.get;s.get=()=>(o(),c());let u,l=t?()=>{clearTimeout(u),u=setTimeout(o)}:o;return K(s,()=>{let a=e.map(d=>d.listen(l));return o(),()=>{for(let d of a)d()}}),s},h=(e,r)=>N(e,r),le=(e,r)=>N(e,r,!0),$=(e={})=>{let r=_(e);return r.setKey=function(t,n){let i=r.value;typeof n>"u"&&t in r.value?(r.value={...r.value},delete r.value[t],r.notify(i,t)):r.value[t]!==n&&(r.value={...r.value,[t]:n},r.notify(i,t))},r};var p=$({isLoaded:!1,client:void 0,user:void 0,session:void 0,organization:void 0}),F=$(),v=_(null);h([p],e=>e.isLoaded);var I=le([p,F],(e,r)=>X(e.isLoaded,{session:e.session,user:e.user,organization:e.organization,client:e.client},r));h([I],e=>e.user);h([I],e=>e.session);var ce=h([I],e=>e.organization),T=h([p],e=>e.client),ue=h([v],e=>e);h([T],e=>e?.sessions);var de=h([T],e=>e?.signIn),fe=h([T],e=>e?.signUp),A=(e,r)=>{K(e,()=>{v.get()?.telemetry?.record(ie(r))})};A(de,"$signInStore");A(fe,"$signUpStore");A(ce,"$organizationStore");var ge=(e,r="5.80.0")=>{if(e)return e;const t=he(r);return t?t==="snapshot"?"5.80.0":t:me(r)},he=e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1],me=e=>e.trim().replace(/^v/,"").split(".")[0];function pe(e){return e?ve(e)||V(e):!0}function ve(e){return/^http(s)?:\/\//.test(e||"")}function V(e){return e.startsWith("/")}function ye(e){return e?V(e)?new URL(e,window.location.origin).toString():e:""}function be(e){if(!e)return"";let r;if(e.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;r=/^(clerk\.)*/gi}return`clerk.${e.replace(r,"")}`}var we={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,r)=>r<5,retryImmediately:!1,jitter:!0},Ee=100,J=async e=>new Promise(r=>setTimeout(r,e)),B=(e,r)=>r?e*(1+Math.random()):e,ke=e=>{let r=0;const t=()=>{const n=e.initialDelay,i=e.factor;let o=n*Math.pow(i,r);return o=B(o,e.jitter),Math.min(e.maxDelayBetweenRetries||o,o)};return async()=>{await J(t()),r++}},Se=async(e,r={})=>{let t=0;const{shouldRetry:n,initialDelay:i,maxDelayBetweenRetries:o,factor:s,retryImmediately:c,jitter:u}={...we,...r},l=ke({initialDelay:i,maxDelayBetweenRetries:o,factor:s,jitter:u});for(;;)try{return await e()}catch(a){if(t++,!n(a,t))throw a;c&&t===1?await J(B(Ee,u)):await l()}},_e="loadScript cannot be called when document does not exist",Ie="loadScript cannot be called without a src";async function Te(e="",r){const{async:t,defer:n,beforeLoad:i,crossOrigin:o,nonce:s}=r||{};return Se(()=>new Promise((u,l)=>{e||l(new Error(Ie)),(!document||!document.body)&&l(_e);const a=document.createElement("script");o&&a.setAttribute("crossorigin",o),a.async=t||!1,a.defer=n||!1,a.addEventListener("load",()=>{a.remove(),u(a)}),a.addEventListener("error",()=>{a.remove(),l()}),a.src=e,a.nonce=s,i?.(a),document.body.appendChild(a)}),{shouldRetry:(u,l)=>l<=5})}var Ae=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Pe({packageName:e,customMessages:r}){let t=e;function n(o,s){if(!s)return`${t}: ${o}`;let c=o;const u=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const l of u){const a=(s[l[1]]||"").toString();c=c.replace(`{{${l[1]}}}`,a)}return`${t}: ${c}`}const i={...Ae,...r};return{setPackageName({packageName:o}){return typeof o=="string"&&(t=o),this},setMessages({customMessages:o}){return Object.assign(i,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(n(i.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(n(i.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(n(i.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(i.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(n(i.MissingClerkProvider,o))},throw(o){throw new Error(n(o))}}}var H="Clerk: Failed to load Clerk",{isDevOrStagingUrl:Ce}=te(),W=Pe({packageName:"@clerk/shared"});function Ue(e){W.setPackageName({packageName:e})}function S(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function R(e){return new Promise((r,t)=>{let n=!1;const i=(l,a)=>{clearTimeout(l),clearInterval(a)},o=()=>{n||S()&&(n=!0,i(c,u),r(null))},c=setTimeout(()=>{n||(n=!0,i(c,u),S()?r(null):t(new Error(H)))},e);o();const u=setInterval(()=>{if(n){clearInterval(u);return}o()},100)})}var Re=async e=>{const r=e?.scriptLoadTimeout??15e3;if(S())return null;if(document.querySelector("script[data-clerk-js-script]"))return R(r);if(!e?.publishableKey)return W.throwMissingPublishableKeyError(),null;const n=R(r);return Te(Oe(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:xe(e)}).catch(()=>{throw new Error(H)}),n},Oe=e=>{const{clerkJSUrl:r,clerkJSVariant:t,clerkJSVersion:n,proxyUrl:i,domain:o,publishableKey:s}=e;if(r)return r;let c="";i&&pe(i)?c=ye(i).replace(/http(s)?:\/\//,""):o&&!Ce(C(s)?.frontendApi||"")?c=be(o):c=C(s)?.frontendApi||"";const u=t?`${t.replace(/\.+$/,"")}.`:"",l=ge(n);return`https://${c}/npm/@clerk/clerk-js@${l}/dist/clerk.${u}browser.js`},Me=e=>{const r={};return e.publishableKey&&(r["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(r["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(r["data-clerk-domain"]=e.domain),e.nonce&&(r.nonce=e.nonce),r},xe=e=>r=>{const t=Me(e);for(const n in t)r.setAttribute(n,t[n])},Y=()=>{["handleRedirectCallback"].forEach(r=>{document.querySelectorAll(`[data-clerk-function-id^="clerk-${r}"]`).forEach(n=>{const i=n.getAttribute("data-clerk-function-id"),o=window.__astro_clerk_function_props?.get(r)?.get(i)??{};v.get()?.[r]?.(o)})})},q=()=>{Object.entries({"create-organization":"mountCreateOrganization","organization-list":"mountOrganizationList","organization-profile":"mountOrganizationProfile","organization-switcher":"mountOrganizationSwitcher","user-button":"mountUserButton","user-profile":"mountUserProfile","sign-in":"mountSignIn","sign-up":"mountSignUp","google-one-tap":"openGoogleOneTap",waitlist:"mountWaitlist","pricing-table":"mountPricingTable"}).forEach(([r,t])=>{document.querySelectorAll(`[data-clerk-id^="clerk-${r}"]`).forEach(i=>{const o=i.getAttribute("data-clerk-id"),s=window.__astro_clerk_component_props?.get(r)?.get(o);i&&v.get()?.[t](i,s)})})},Le=e=>{let r=!1;return t=>{if(r){const n=window.Clerk;return new Promise(i=>n?(n.loaded&&(q(),Y()),i(n.loaded)):i(!1))}return r=!0,e(t)}},O;Ue("@clerk/astro");function M(e){return(r,t)=>{t?.__internal_metadata?.navigationType==="internal"?e(history.state,"",r):t?.windowNavigate(r)}}var De=Le(ze);async function ze(e){let r=window.Clerk;if(!r){if(await Re(e),!window.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");r=window.Clerk}return v.get()||v.set(r),O={routerPush:M(window.history.pushState.bind(window.history)),routerReplace:M(window.history.replaceState.bind(window.history)),...e},r.load(O).then(()=>{p.setKey("isLoaded",!0),ue.notify(),q(),Y(),r.addListener(t=>{p.setKey("client",t.client),p.setKey("user",t.user),p.setKey("session",t.session),p.setKey("organization",t.organization)})}).catch(()=>{})}var Ke=e=>{const{signInUrl:r,signUpUrl:t,isSatellite:n,proxyUrl:i,domain:o,publishableKey:s,telemetry:c,...u}=e||{};return{signInUrl:r||void 0,signUpUrl:t||void 0,isSatellite:n||void 0,proxyUrl:i||void 0,domain:o||void 0,publishableKey:s||"pk_test_your_publishable_key_here",telemetry:c||{disabled:P(),debug:P()},...u}};function Ne(e){async function r(t){const n=document.getElementById("__CLERK_ASTRO_DATA__");n&&F.set(JSON.parse(n.textContent||"{}"));const i=document.getElementById("__CLERK_ASTRO_SAFE_VARS__");let o={};i&&(o=JSON.parse(i.textContent||"{}")),await e(Ke({...t,...o}))}return r}var x="data-astro-transition-persist",$e="data-emotion";function Je(e,r){e.deselectScripts(r),e.swapRootAttributes(r);const t=document.querySelectorAll(`style[${$e}]`);Fe(r,Array.from(t));const n=e.saveFocus();e.swapBodyElement(r.body,document.body),n()}function Fe(e,r){for(const t of Array.from(document.head.children)){const n=Ve(t,e);n?n.remove():r.includes(t)||t.remove()}document.head.append(...e.head.children)}function Ve(e,r){const t=e.getAttribute(x),n=t&&r.head.querySelector(`[${x}="${t}"]`);if(n)return n;if(e.matches("link[rel=stylesheet]")){const i=e.getAttribute("href");return r.head.querySelector(`link[rel=stylesheet][href="${i}"]`)}return null}var Be=Ne(De);export{Be as r,Je as s};
